#!/bin/bash
if [[ $EUID -ne 0 ]]; then
  echo -e "\e[41;97m ERROR \e[0;97m This script must be run as root.\e[0m" 
  exit;
fi

# This script updates OriginPHP framework to the latest version
if [ -d update ]; then
    echo -e "\e[41;97m ERROR \e[0;97m Update folder already exists.\e[0m" 
    exit;
fi

git clone https://github.com/originphp/originphp.git update

if [ -d update ]; then
    rm -rf update/.git
    chown -R www-data:www-data update
    rm -rf origin
    mv update/origin origin
    cp update/bin/* bin
    rm -rf update
    echo -e "\e[97m[\e[92m OK \e[97m] Updated \e[0m"
    exit;
fi

echo -e "\e[97m[\e[91m ERROR \e[97m] Did not update \e[0m"